# GNΩSIS: Lessons Learned in Generating a High-Level Synthesis Dataset

This repository provides part of the source code used for the generation and analysis of the **GNΩSIS** dataset.

Its primary focus is to demonstrate and support the extraction of source code feature vectors from the `src_info.json` files generated by the [`HLSAnalysisTools`](https://github.com/aferikoglou/HLSAnalysisTools) repository.

Additionally, it includes functionality to parse `.sqlite` files produced by the [`GenHLSOptimizer`](https://github.com/aferikoglou/GenHLSOptimizer), which contain applied HLS directives along with corresponding metrics such as latency, BRAM, DSP, FF, LUT usage, and synthesis time.

Together with the aforementioned tools and repositories, this setup enables users to **recreate**, **analyze**, or **extend** the GNΩSIS dataset and framework effectively.

It also includes a detailed schema of the dataset and utility scripts for visualizing key metrics for individual applications.

## Repository Structure

├── data/
│   ├── ApplicationAPLMapping/          
│   │   # Provides the mapping between directive labels and their corresponding action points for each application.
│
│   ├── ApplicationDatabases/           
│   │   # Includes the corresponding database files for each evaluated FPGA device and target clock frequency.
│
│   ├── ApplicationDataset/             
│   │   # Provides the source code for each application, accompanied by the src_info.json and kernel_info.txt metadata files.
│
│   ├── CSVS/                           
│   │   # Includes the extracted data from the corresponding SQLite databases.
│
│   ├── ApplicationBaselineInformation.csv    
│   │   # Provides, for each application, the QoR metrics obtained from HLS reports generated without any applied directives or Vitis optimizations, across the evaluated FPGAs and target clock frequencies.
│
│   ├── ApplicationInformation.csv      
│   │   # Offers a quick reference to the top-level function file for each application, including the function name and file extension.
│
│   └── SourceCodeFeatureVectors.csv    
│       # Provides the source code feature vector representation for each application.
│
├── modules/                            
│   # Includes the core components of the repository, structured as modular classes.
│
├── datasetGeneration.py                
│   # Python script that generates the `SourceCodeFeatureVectors.csv` file containing the extracted source code features.
│
├── qorMetricsDirectivesAnalyzer.py     
│   # Python script that creates the files in the `CSVS` directory and performs basic per-application analyses.
│
├── requirements.txt                    
│   # Lists required Python packages to run the repository.
│
├── .gitignore                          
│   # Specifies intentionally untracked files to ignore.
│
├── LICENSE.md                          
│   # The license for this project.
│
└── README.md                           
    # Project overview, documentation, and usage instructions.


## Getting Started

These instructions will get you a copy of the project on your local machine.

### Prerequisites

This project was tested on Ubuntu 22.04 LTS (GNU/Linux 5.4.0-187-generic x86_64) with Python 3.8.10.

In addition, the following libraries are needed:

* [`sqlitedict`](https://pypi.org/project/sqldict/) (version 2.0.0)
* [`pandas`](https://pypi.org/project/pandas/) (version 1.4.3)
* [`seaborn`](https://pypi.org/project/seaborn/) (version 0.12.0)
* [`matplotlib`](https://pypi.org/project/matplotlib/) (version 3.5.3)
* [`paretoset`](https://pypi.org/project/paretoset/) (version 1.2.3)

which can be simply installed using the following command.

```bash
python3 -m pip install -r requirements.txt
```

### Run

After downloading the software in the *Prerequisites* section you can clone this repository on your local machine.

**Source Code Feature Vector Generation**

```bash
python3.10 datasetGeneration.py --MODE GNWSIS

Output:

Started source code feature vector generation...

...
The maximum number of array dimensions in the dataset is: 2
The maximum number of arrays in a single application is: 22
The maximum number of loop structures in an application in our dataset is 26
The maximum nesting level in a loop structure in an application in our dataset is 5
The maximum number of loops in each level of our dataset applications are [26, 16, 7, 5, 2]

Finished source code feature vector generation...

```

Please note that this file contains source code feature vectors for a broader set of applications than those officially included in the GNΩSIS dataset. To ensure consistency with the dataset presented in the manuscript, we recommend using the `SourceCodeFeatureVectors.csv` located in the `data/` directory.

**Extract Data from SQLite to CSV**

```bash
TODO: Add a command

Output: Add expected output
```

## Publication

If you find our project useful, please consider citing our paper:

```bash

```
